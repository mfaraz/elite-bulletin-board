/*
 * validate.js 1.0.2
 * Copyright (c) 2011 Rick Harrison, http://rickharrison.me
 * validate.js is open sourced under the MIT license.
 * Portions of validate.js are inspired by CodeIgniter.
 * http://rickharrison.github.com/validate.js
 */
(function(a,b,c){var d={messages:{required:lang.required,matches:lang.matches,valid_email:lang.valid_email,valid_emails:lang.valid_emails,min_length:lang.min_length,max_length:lang.max_length,exact_length:lang.exact_length,greater_than:lang.greater_than,less_than:lang.less_than,alpha:lang.alpha,alpha_numeric:lang.alpha_numeric,alpha_dash:lang.alpha_dash,numeric:lang.numeric,integer:lang.integer,decimal:lang.decimal,is_natural:lang.is_natural,is_natural_no_zero:lang.is_natural_no_zero,valid_ip:lang.valid_ip,valid_base64:lang.valid_base64},callback:function(a){}};var e=/^(.+)\[(.+)\]$/,f=/^[0-9]+$/,g=/^\-?[0-9]+$/,h=/^\-?[0-9]*\.?[0-9]+$/,i=/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,6}$/i,j=/^[a-z]+$/i,k=/^[a-z0-9]+$/i,l=/^[a-z0-9_-]+$/i,m=/^[0-9]+$/i,n=/^[1-9][0-9]*$/i,o=/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i,p=/[^a-zA-Z0-9\/\+=]/i;var q=function(a,c,e){this.callback=e||d.callback;this.errors=[];this.fields={};this.form=b.forms[a]||{};this.messages={};this.handlers={};for(var f=0,g=c.length;f<g;f++){var h=c[f];if(!h.name||!h.rules){continue}this.fields[h.name]={name:h.name,display:h.display||h.name,rules:h.rules,type:null,value:null,checked:null}}this.form.onsubmit=function(a){return function(b){try{return a._validateForm(b)}catch(c){}}}(this)};q.prototype.setMessage=function(a,b){this.messages[a]=b;return this};q.prototype.registerCallback=function(a,b){if(a&&typeof a==="string"&&b&&typeof b==="function"){this.handlers[a]=b}return this};q.prototype._validateForm=function(a){this.errors=[];for(var b in this.fields){if(this.fields.hasOwnProperty(b)){var d=this.fields[b]||{},e=this.form[d.name];if(e&&e!==c){d.type=e.type;d.value=e.value;d.checked=e.checked}this._validateField(d)}}if(typeof this.callback==="function"){this.callback(this.errors,a)}if(this.errors.length>0){if(a&&a.preventDefault){a.preventDefault()}else{return false}}return true};q.prototype._validateField=function(a){var b=a.rules.split("|");if(a.rules.indexOf("required")===-1&&(!a.value||a.value===""||a.value===c)){return}for(var f=0,g=b.length;f<g;f++){var h=b[f],i=null,j=false;if(parts=e.exec(h)){h=parts[1];i=parts[2]}if(typeof this._hooks[h]==="function"){if(!this._hooks[h].apply(this,[a,i])){j=true}}else if(h.substring(0,9)==="callback_"){h=h.substring(9,h.length);if(typeof this.handlers[h]==="function"){if(this.handlers[h].apply(this,[a.value])===false){j=true}}}if(j){var k=this.messages[h]||d.messages[h];if(k){var l=k.replace("%s",a.display);if(i){l=l.replace("%s",this.fields[i]?this.fields[i].display:i)}this.errors.push(l)}else{this.errors.push("An error has occurred with the "+a.display+" field.")}break}}};q.prototype._hooks={required:function(a){var b=a.value;if(a.type==="checkbox"){return a.checked===true}return b!==null&&b!==""},matches:function(a,b){if(el=this.form[b]){return a.value===el.value}return false},valid_email:function(a){return i.test(a.value)},valid_emails:function(a){var b=a.value.split(",");for(var c=0;c<b.length;c++){if(!i.test(b[c])){return false}}return true},min_length:function(a,b){if(!f.test(b)){return false}return a.value.length>=b},max_length:function(a,b){if(!f.test(b)){return false}return a.value.length<=b},exact_length:function(a,b){if(!f.test(b)){return false}return a.value.length===b},greater_than:function(a,b){if(!h.test(a.value)){return false}return parseFloat(a.value)>parseFloat(b)},less_than:function(a,b){if(!h.test(a.value)){return false}return parseFloat(a.value)<parseFloat(b)},alpha:function(a){return j.test(a.value)},alpha_numeric:function(a){return k.test(a.value)},alpha_dash:function(a){return l.test(a.value)},numeric:function(a){return h.test(a.value)},integer:function(a){return g.test(a.value)},decimal:function(a){return h.test(a.value)},is_natural:function(a){return m.test(a.value)},is_natural_no_zero:function(a){return n.test(a.value)},valid_ip:function(a){return o.test(a.value)},valid_base64:function(a){return p.test(a.value)}};a.FormValidator=q})(window,document)