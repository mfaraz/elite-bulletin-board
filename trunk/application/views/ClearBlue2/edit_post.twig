{% extends "/ClearBlue2/master.twig" %}

{% block title %}{{boardName}} - {{pageTitle}}{% endblock %}

{% block bodyRender %}

<script type="text/javascript" src="{{BOARD_URL}}js/jquery.jUploader.js"></script>
<!-- markItUp! -->
<script type="text/javascript" src="{{BOARD_URL}}js/jquery.markitup.js"></script>
<!-- markItUp! toolbar settings -->
<script type="text/javascript" src="{{BOARD_URL}}js/set.js"></script>
<!-- API detection -->
<script type="text/javascript" src="{{BOARD_URL}}js/validateAPI.js"></script>
<!-- Rich text editor file -->
<script type="text/javascript" src="{{BOARD_URL}}js/pEditor.js"></script>

{{BREADCRUMB|raw}}<br />

{{VALIDATIONSUMMARY|raw}}<br />

<!-- validation box. -->
<div style="display:none;" id="div_ErrMsg">
	<div class="ui-widget centerContainer" style="width: 45%;">
		<div class="ui-state-error ui-corner-all" style="padding: 0 .7em;text-align:left;">
			<span style="float: right;font-weight:bold;"><a href="#close" onclick="$('#div_ErrMsg').hide('blind', {}, 500);" class="ui-icon ui-icon-circle-close">&nbsp;</a></span>
			<p id="validateRes"></p>
		</div>
	</div>
</div>

<table border="0" class="table" cellpadding="1" cellspacing="1">
<tr>
	<td class="ui-widget-header centerText">
		{{LANG_POSTINGRULES}}
	</td>
</tr><tr>
	<td class="ui-widget-content centerText">
		{{LANG_ALLOWSMILES}}: 
		{% if ALLOWSMILES == 1 %}
		<strong>{{LANG_YES}}</strong>
		{% else %}
		<strong>{{LANG_NO}}</strong>
		{% endif %}
		&nbsp;|&nbsp;
		{{LANG_ALLOWBBCODE}}:
		{% if ALLOWBBCODE == 1 %}
		<strong>{{LANG_YES}}</strong>
		{% else %}
		<strong>{{LANG_NO}}</strong>
		{% endif %}
		&nbsp;|&nbsp;
		{{LANG_ALLOWIMG}}: 
		{% if ALLOWIMG == 1 %}
		<strong>{{LANG_YES}}</strong>
		{% else %}
		<strong>{{LANG_NO}}</strong>
		{% endif %}
	</td>
</tr>
</table><br />

<!-- warning container -->
<div style="display:none;" id="div_ErrMsg">
	<div class="ui-widget CenterContainer" style="width: 45%;">
		<div class="ui-state-error ui-corner-all" style="padding: 0 .7em;text-align:left;">
			<span style="float: right;font-weight:bold;"><a href="#close" onclick="$('#div_ErrMsg').hide('blind', {}, 500);" class="ui-icon ui-icon-circle-close">&nbsp;</a></span>
			<p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>
			<strong>Alert:</strong>&nbsp;<span id="ErrMsg"></span></p>
		</div>
	</div>
</div>

<div id="moreSmiles"></div>
<div id="DLG_upload">
	{% if ATTACHMENTLIMIT > 0 %}
	{{UPLOADFORM|raw}}
		<input id="attach" name="userfile" type="file" /><br />
		<input type="submit" value="{{LANG_UPLOAD}}" id="fileUpload" />
		<input type="reset" value="{{LANG_CLEAR}}" id="ClearList" />
		<input type="button" value="{{LANG_VIEWFILES}}" id="AttachList" />
	</form>
	<div id="filelist"></div>

	<script type="text/javascript">
		$(function(){
			$('#attach').jUploader({
				LoadingGfx: "{{BOARD_URL}}application/views/ClearBlue2/images/loading.gif",
				LoadingMsg: lang.attachLoading,
				PendingMsg: lang.attachPending,
				SuccessMsg: lang.attachSuccess,
				FailureMsg: lang.attachFailed,
				uploadLimitMsg: lang.attachLimit,
				uploadLimit: "{{ATTACHMENTLIMIT}}",
				deleteUrl: "{{BOARD_URL}}{{INDEX_PAGE}}/upload/delete",
				confirmDeletMsg: lang.attachDeletePrompt,
				fileMgrUrl: "{{BOARD_URL}}{{INDEX_PAGE}}/upload/"
			});
		});
	</script>
	{% endif %}
</div>

{{EDITPOSTFORM|raw}}
<div id="emoticons" class="ui-widget-content ui-corner-all centerContainer centerText" style="width:500px;">
	{{SMILES|raw}}
	<hr />
	<a href="#smiles" onclick="$('#moreSmiles').dialog('open');">{{LANG_SMILES}}</a>
</div><br />
<div align="center">
	<textarea id="replyBody" name="reply_post" cols="80" rows="20">{{POSTBODY}}</textarea>
	<br /><input type="submit" value="{{LANG_EDITPOST}}" class="submit" />
</div>
<br />
<div class="ui-widget-content ui-corner-all centerContainer" style="text-align:left;width:450px; padding: 0 .7em;">
	<div style="text-align:center;">
		<a href="#editor" class="toggle"><span>{{LANG_DISABLERTF}}</span></a>
	</div>
	<input type="checkbox" name="subscribe" value="1" />{{LANG_NOTIFY}}<br />
	<input type="checkbox" name="no_smile" value="1" />{{LANG_DISABLESMILES}}<br />
	<input type="checkbox" name="no_bbcode" value="1" />{{LANG_DISABLEBBCODE}}
</div>
</form><br />

<script type="text/javascript">
$('#replyBody').focus();

new FormValidator('frmEditPost', [{
	name: 'replyBody',
	display: '{{LANG_TOPICBODY}}',
	rules: 'required|min_length[10]'
}], function(errors, event) {

	if (errors.length > 0) {
		$('#validateRes').empty();
		$('#validateRes').append(errors.join('<br />'));
		$('#div_ErrMsg').show();
	} else {
		event.returnValue = true; //allow form to process.
	}

});
</script>
{% endblock %}
